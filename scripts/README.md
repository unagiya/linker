# マイグレーションスクリプト

このディレクトリには、データベースマイグレーションやデータ移行のためのスクリプトが含まれています。

## ニックネームマイグレーション

### 概要

既存のプロフィールがUUID形式のニックネームを持っている場合、それらを適切にマイグレーションするためのスクリプトです。

### 実行方法

```bash
npm run migrate:nicknames
```

### 機能

1. **マイグレーション状態の確認**
   - 総プロフィール数の表示
   - マイグレーションが必要なプロフィール数の表示

2. **自動マイグレーション**
   - UUID形式のニックネームを持つプロフィールを検出
   - 各プロフィールのニックネームを更新
   - 成功/失敗の統計を表示

3. **エラーハンドリング**
   - 失敗したプロフィールのエラー詳細を表示
   - 部分的な失敗でも続行

### 使用例

```bash
$ npm run migrate:nicknames

============================================================
ニックネームマイグレーションスクリプト
============================================================

マイグレーション状態を確認中...
総プロフィール数: 10
マイグレーション必要: 3

3件のプロフィールをマイグレーションします...

============================================================
マイグレーション結果
============================================================
成功: 3件
失敗: 0件

✓ マイグレーションが正常に完了しました
```

### 注意事項

- このスクリプトは管理者のみが実行してください
- 実行前にデータベースのバックアップを取ることを推奨します
- マイグレーション済みのプロフィールは自動的にスキップされます

## その他のスクリプト

今後、他のマイグレーションスクリプトがこのディレクトリに追加される可能性があります。
